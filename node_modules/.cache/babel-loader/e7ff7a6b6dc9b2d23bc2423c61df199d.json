{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\BITS\\\\Web development\\\\CodeBase\\\\ReactAppWorkspace\\\\src\\\\components\\\\AddEvaluation.js\";\nimport React from 'react';\nimport { getUser, removeUserSession } from './Common';\nimport { withRouter } from \"react-router-dom\";\nimport './dashboard.css';\nimport axios from 'axios';\n\nclass AddEvaluation extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleUserInput = e => {\n      const name = e.target.name;\n      const value = e.target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleSubmit = e => {\n      var apiBaseUrl = \"http://localhost:8000/api/courseEvaluation/\";\n      var self = this;\n      var payload = {\n        \"evaluationtype\": this.state.evaluation,\n        \"totalmarks\": this.state.mark,\n        \"totalquestions\": this.state.totalQuestions,\n        \"date\": this.state.date,\n        \"time\": this.state.time\n      };\n      axios.post(apiBaseUrl, payload, {\n        auth: {\n          username: 'admin',\n          password: '123'\n        }\n      }).then(function (response) {\n        console.log(JSON.stringify(response));\n        console.log(JSON.stringify(response).length === 0);\n\n        if (response.status === 201) {\n          var details = \"Evalution added for the enrolled course! Evaluation:\" + self.state.evaluation + \" Marks:\" + self.state.mark + \" Date/Time: \" + self.state.date + \"/\" + self.state.time;\n          var bcc = sessionStorage.getItem('email') + ';';\n          self.state.StudentsEnrolled.map(id => bcc = bcc + id + \";\");\n          console.log(details);\n          self.sendMail(self, details, self.state.StudentsEnrolled);\n          alert(\"Evaluation created successfully!\");\n        }\n      }).catch(function (error) {\n        console.log(\"Something went wrong.! Please try again!\");\n        alert(\"Something went wrong.! Please try again!\");\n      });\n      e.preventDefault();\n    };\n\n    this.handleGoBack = e => {\n      this.props.history.push('/LMS/dashboardF');\n      e.preventDefault();\n    };\n\n    this.handleLogout = e => {\n      removeUserSession();\n      this.props.history.push('/');\n      e.preventDefault();\n    };\n\n    this.state = {\n      EvaluationType: [\"Quiz\", \"Assignment\", \"OnlineExam\"],\n      evaluation: '',\n      mark: '',\n      totalQuestions: '',\n      date: '',\n      time: '',\n      email: '',\n      StudentsEnrolled: ['2020CFSE001@wilp.bits-pilani.ac.in', '2020CFSE002@wilp.bits-pilani.ac.in', '2020CFSE008@wilp.bits-pilani.ac.in']\n    };\n    this.handleLogout = this.handleLogout.bind(this);\n  }\n\n  sendMail(self, details, bcc) {\n    var msgApiURI = \"http://localhost:8080/emailNotifyAll\";\n    var data = {\n      \"bcc\": bcc,\n      \"subject\": \"LMS Notification!\",\n      \"body\": details\n    };\n    axios.post(msgApiURI, data, {\n      auth: {\n        username: 'admin',\n        password: '123'\n      }\n    }).then(function (response) {\n      console.log(\"Evalution update mail sent!\");\n      self.persistEmailNotificationDetails(details, bcc, 'Success');\n    }).catch(function (error) {\n      console.log(\"Something went wrong.! Evaluation notification failed!\");\n      self.persistEmailNotificationDetails(details, bcc, 'Failed');\n    });\n  }\n\n  persistEmailNotificationDetails(details, notifiedList, notificationStatus) {\n    var msgApiURI = \"http://localhost:8080/emailNotification\";\n    var data = {\n      \"notifiedList\": notifiedList,\n      \"changes\": details,\n      \"changedBy\": sessionStorage.getItem('email'),\n      \"status\": notificationStatus\n    };\n    axios.post(msgApiURI, data, {}).then(function (response) {\n      console.log(\"Notification details persisted successfully!\");\n    }).catch(function (error) {\n      console.log(\"Something went wrong.! Notification details persistent failed!\");\n    });\n  }\n\n  render() {\n    const user = getUser();\n\n    if (user.name.length === 0) {\n      alert(\"Session Lost. Redirecting to login page!\");\n      this.handleLogout();\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Greeting\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Welcome \", user.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"createmodule\",\n        children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n            children: \"Add Course Evaluation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            name: \"ModuleDetails\",\n            onSubmit: this.handleSubmit,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"coursedropdown\",\n                  name: \"evaluation\",\n                  value: this.state.evaluation,\n                  onChange: this.handleUserInput,\n                  required: true,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"Default\",\n                    selected: true,\n                    children: \"Select Evalution Type*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 15\n                  }, this), this.state.EvaluationType.map(type => /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: type\n                  }, type, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 56\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  placeholder: \"Enter Total Marks*\",\n                  name: \"mark\",\n                  value: this.state.mark,\n                  onChange: this.handleUserInput,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  placeholder: \"Enter Total Questions*\",\n                  name: \"totalQuestions\",\n                  value: this.state.totalQuestions,\n                  onChange: this.handleUserInput,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 18\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 18\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"Date\",\n                  placeholder: \"Enter Date*\",\n                  name: \"date\",\n                  value: this.state.date,\n                  onChange: this.handleUserInput,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 18\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 18\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"time\",\n                  placeholder: \"Enter Timing in AM/PM*\",\n                  name: \"time\",\n                  value: this.state.time,\n                  onChange: this.handleUserInput,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 18\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 18\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"submit\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"submit\",\n                  value: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"back\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          onClick: this.handleGoBack,\n          value: \"Go Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-menu\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          onClick: this.handleLogout,\n          value: \"Sign out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(AddEvaluation);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["D:/BITS/Web development/CodeBase/ReactAppWorkspace/src/components/AddEvaluation.js"],"names":["React","getUser","removeUserSession","withRouter","axios","AddEvaluation","Component","constructor","props","handleUserInput","e","name","target","value","setState","handleSubmit","apiBaseUrl","self","payload","state","evaluation","mark","totalQuestions","date","time","post","auth","username","password","then","response","console","log","JSON","stringify","length","status","details","bcc","sessionStorage","getItem","StudentsEnrolled","map","id","sendMail","alert","catch","error","preventDefault","handleGoBack","history","push","handleLogout","EvaluationType","email","bind","msgApiURI","data","persistEmailNotificationDetails","notifiedList","notificationStatus","render","user","type"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { getUser, removeUserSession } from './Common';\nimport { withRouter } from \"react-router-dom\";\nimport './dashboard.css';\nimport axios from 'axios';\n\n\nclass AddEvaluation extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      EvaluationType:[\"Quiz\", \"Assignment\", \"OnlineExam\"],\n      evaluation:'',\n      mark:'',\n      totalQuestions:'',\n      date:'',\n      time:'',\n      email:'',\n      StudentsEnrolled: ['2020CFSE001@wilp.bits-pilani.ac.in','2020CFSE002@wilp.bits-pilani.ac.in','2020CFSE008@wilp.bits-pilani.ac.in']\n\n    }\n    this.handleLogout = this.handleLogout.bind(this);\n    \n  }\n\n  handleUserInput = (e) => {\n    const name = e.target.name;\n    const value = e.target.value;\n    this.setState({ [name]: value });\n  }\n\n  sendMail(self, details, bcc) {\n    var msgApiURI = \"http://localhost:8080/emailNotifyAll\";\n      var data = {\n        \"bcc\": bcc,\n        \"subject\": \"LMS Notification!\",\n        \"body\": details\n      }\n      axios.post(msgApiURI, data,\n        {auth: {\n          username: 'admin',\n          password: '123'\n        }}).then(function (response) {\n          console.log(\"Evalution update mail sent!\");\n          self.persistEmailNotificationDetails(details, bcc, 'Success');\n        })\n        .catch(function (error) {\n          console.log(\"Something went wrong.! Evaluation notification failed!\");\n          self.persistEmailNotificationDetails(details, bcc, 'Failed');\n\n        });\n  }\n\n  persistEmailNotificationDetails(details, notifiedList, notificationStatus){\n    var msgApiURI = \"http://localhost:8080/emailNotification\";\n      var data = {\n        \"notifiedList\": notifiedList,\n        \"changes\": details,\n        \"changedBy\": sessionStorage.getItem('email'),\n        \"status\": notificationStatus\n      }\n      axios.post(msgApiURI, data,\n        {}).then(function (response) {\n          console.log(\"Notification details persisted successfully!\");\n        })\n        .catch(function (error) {\n          console.log(\"Something went wrong.! Notification details persistent failed!\");\n        });\n  }\n\n  handleSubmit = (e) => {\n    \n    var apiBaseUrl = \"http://localhost:8000/api/courseEvaluation/\";\n    var self = this;\n    var payload = { \n\t  \"evaluationtype\": this.state.evaluation,\n    \"totalmarks\": this.state.mark,\n    \"totalquestions\": this.state.totalQuestions,\n    \"date\": this.state.date,\n    \"time\": this.state.time\n\n    };\n    axios\n    .post(apiBaseUrl, payload,\n      {auth: {\n        username: 'admin',\n        password: '123'\n      }})\n      .then(function (response) {\n       console.log(JSON.stringify(response))\n       console.log((JSON.stringify(response)).length === 0)\n        if (response.status === 201) {\n        var details=\"Evalution added for the enrolled course! Evaluation:\"+self.state.evaluation+\" Marks:\"+self.state.mark+\" Date/Time: \"+self.state.date+\"/\"+self.state.time;\n        var bcc=sessionStorage.getItem('email')+';';\n        self.state.StudentsEnrolled.map(id=> bcc=bcc+id+\";\");\n        console.log(details);\n        self.sendMail(self,details, self.state.StudentsEnrolled);\n        alert(\"Evaluation created successfully!\");\n            } \n          }).catch(function (error) {\n            console.log(\"Something went wrong.! Please try again!\");\n            alert(\"Something went wrong.! Please try again!\");\n          });\n          e.preventDefault();  \n    \n  }\n \n\n  handleGoBack = (e) => {\n    this.props.history.push('/LMS/dashboardF');\n    e.preventDefault();\n  }\n\n  \n  handleLogout = (e) => {\n    removeUserSession();\n    this.props.history.push('/');\n    e.preventDefault();\n  }\n\n  render() {\n    const user = getUser();\n    if(user.name.length===0){\n      alert(\"Session Lost. Redirecting to login page!\");\n      this.handleLogout();\n    }\n    \n    return (\n      <div className=\"dashboard-container\">\n        <div className=\"Greeting\">\n          <h3>Welcome {user.name}</h3>\n        </div>\n        <div className=\"createmodule\">  \n        <fieldset>\n        <legend>Add Course Evaluation</legend>\n        <form\n            name=\"ModuleDetails\"\n            onSubmit={this.handleSubmit}\n          >\n            <div>\n            <div>\n            <select\n            className = \"coursedropdown\"\n            name=\"evaluation\"\n            value={this.state.evaluation}\n              onChange={this.handleUserInput}\n              required\n            >\n              <option value=\"Default\" selected>Select Evalution Type*</option>\n              {this.state.EvaluationType.map((type) => <option key={type}>{type}</option>)}\n            </select>\n            </div>\n            <div>\n            <input\n                  type=\"number\"\n                  placeholder=\"Enter Total Marks*\"\n                  name=\"mark\"\n                  value={this.state.mark}\n                  onChange={this.handleUserInput}\n                  required\n                />\n                 </div>\n                 <div>\n                 <input\n                  type=\"number\"\n                  placeholder=\"Enter Total Questions*\"\n                  name=\"totalQuestions\"\n                  value={this.state.totalQuestions}\n                  onChange={this.handleUserInput}\n                  required\n                />\n                 </div>\n                 <div>\n                 <input\n                  type=\"Date\"\n                  placeholder=\"Enter Date*\"\n                  name=\"date\"\n                  value={this.state.date}\n                  onChange={this.handleUserInput}\n                  required\n                />\n                </div>\n                 <div>\n                 <input\n                  type=\"time\"\n                  placeholder=\"Enter Timing in AM/PM*\"\n                  name=\"time\"\n                  value={this.state.time}\n                  onChange={this.handleUserInput}\n                  required\n                />\n                </div>\n            <div className=\"submit\">\n            <input type='submit' value='Submit'/>\n            </div>\n            </div>\n          </form>\n          </fieldset>\n        </div>\n        <div className=\"back\">\n        <input type=\"submit\" onClick={this.handleGoBack} value=\"Go Back\"/>\n        </div>\n        <div className='user-menu'>\n        <input type=\"submit\" onClick={this.handleLogout} value=\"Sign out\"/>\n        </div>\n      </div>\n    );\n   }  \n}\n\nexport default withRouter(AddEvaluation);"]},"metadata":{},"sourceType":"module"}