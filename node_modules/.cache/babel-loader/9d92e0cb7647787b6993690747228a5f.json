{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\BITS\\\\Web development\\\\Assignment2\\\\LMS_React_App\\\\src\\\\components\\\\jobs.js\";\nimport React from 'react';\nimport \"./bookings.css\";\nimport { getUser } from './Common';\nexport default class Jobs extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClick = index => {\n      this.props.history.push({\n        pathname: '/UpdateService',\n        state: {\n          service: this.state.jobsdata[index]\n        }\n      });\n    };\n\n    this.getKeys = function () {\n      return Object.keys(this.state.jobsdata[0]);\n    };\n\n    this.getHeader = function () {\n      var keys = this.getKeys();\n      return keys.map(key => {\n        return /*#__PURE__*/_jsxDEV(\"th\", {\n          children: key.toUpperCase()\n        }, key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 14\n        }, this);\n      });\n    };\n\n    this.getRowsData = function () {\n      var items = this.props.jobsdata;\n      var keys = this.getKeys();\n      return items.map((row, index) => {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(RenderRow, {\n            data: row,\n            keys: keys\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 32\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 16\n        }, this);\n      });\n    };\n\n    this.state = {\n      jobsdata: [{\n        jobid: \"-1\",\n        servicename: \"\",\n        expertname: \"\",\n        customername: \"\",\n        date: \"\",\n        time: \"\",\n        jobstatus: \"\",\n        paymentstatus: \"\"\n      }]\n    };\n    this.getHeader = this.getHeader.bind(this);\n    this.getRowsData = this.getRowsData.bind(this);\n    this.getKeys = this.getKeys.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  fetchdata() {\n    const user = getUser();\n    var apiBaseUrl = \"http://localhost:8000/api/core/jobs/jobs_filters?\";\n\n    if (this.props.role === \"Customer\") {\n      var customer_id = user.id;\n      apiBaseUrl = apiBaseUrl + \"customer_id=\" + customer_id;\n    } else if (this.props.role === \"expert\") {\n      var expert_id = user.id;\n      apiBaseUrl = apiBaseUrl + \"expert_id=\" + expert_id;\n    }\n\n    fetch(apiBaseUrl).then(response => {\n      return response.json();\n    }).then(data => {\n      let jobsfromapi = data.map(job => {\n        return {\n          jobid: job.id,\n          servicename: job.service_id,\n          expertname: job.expert_id,\n          customername: job.cust_id,\n          date: job.start_date,\n          time: job.start_time,\n          jobstatus: job.job_status,\n          paymentstatus: job.payment_id\n        };\n      });\n      this.setState({\n        jobsdata: jobsfromapi\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  componentDidMount() {\n    this.fetchdata();\n  }\n\n  render() {\n    var info = this.state.jobsdata;\n    var keys = this.getKeys();\n    var items = info.map((row, index) => {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(RenderRow, {\n          data: row,\n          keys: keys\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 30\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => this.handleClick(index),\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 14\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bookingslist\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"My Bookings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: this.getHeader()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: items\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nexport const RenderRow = props => {\n  let url = \"./UpdateService\";\n  return props.keys.map(key => {\n    let keyid;\n\n    if (key === \"jobid\") {\n      keyid = \"jobid\" + props.data[key];\n      return /*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: url,\n          children: props.data[key]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 30\n        }, this)\n      }, keyid, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 14\n      }, this);\n    } else {\n      keyid = key + props.data[key];\n      return /*#__PURE__*/_jsxDEV(\"td\", {\n        children: props.data[key]\n      }, keyid, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 14\n      }, this);\n    }\n  });\n};\n_c = RenderRow;\n\nvar _c;\n\n$RefreshReg$(_c, \"RenderRow\");","map":{"version":3,"sources":["D:/BITS/Web development/Assignment2/LMS_React_App/src/components/jobs.js"],"names":["React","getUser","Jobs","Component","constructor","props","handleClick","index","history","push","pathname","state","service","jobsdata","getKeys","Object","keys","getHeader","map","key","toUpperCase","getRowsData","items","row","jobid","servicename","expertname","customername","date","time","jobstatus","paymentstatus","bind","fetchdata","user","apiBaseUrl","role","customer_id","id","expert_id","fetch","then","response","json","data","jobsfromapi","job","service_id","cust_id","start_date","start_time","job_status","payment_id","setState","catch","error","console","log","componentDidMount","render","info","RenderRow","url","keyid"],"mappings":"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","sourcesContent":["import React from 'react';\nimport \"./bookings.css\";\nimport { getUser } from './Common';\n\nexport default class Jobs extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      jobsdata: [{\n        jobid: \"-1\",\n        servicename: \"\",\n        expertname: \"\",\n        customername: \"\",\n        date: \"\",\n        time: \"\",\n        jobstatus: \"\",\n        paymentstatus: \"\",\n      }],\n    }\n    this.getHeader = this.getHeader.bind(this);\n    this.getRowsData = this.getRowsData.bind(this);\n    this.getKeys = this.getKeys.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n  fetchdata() {\n    const user = getUser();\n    var apiBaseUrl = \"http://localhost:8000/api/core/jobs/jobs_filters?\"\n    if (this.props.role === \"Customer\") {\n      var customer_id = user.id;\n\n      apiBaseUrl = apiBaseUrl + \"customer_id=\" + customer_id;\n\n    }\n    else if (this.props.role === \"expert\") {\n      var expert_id = user.id;\n\n      apiBaseUrl = apiBaseUrl + \"expert_id=\" + expert_id;\n\n    }\n\n    fetch(apiBaseUrl)\n      .then((response) => {\n        return response.json();\n      })\n      .then(data => {\n        let jobsfromapi = data.map((job) => {\n          return {\n            jobid: job.id,\n            servicename: job.service_id,\n            expertname: job.expert_id,\n            customername: job.cust_id,\n            date: job.start_date,\n            time: job.start_time,\n            jobstatus: job.job_status,\n            paymentstatus: job.payment_id,\n          }\n        });\n        this.setState({ jobsdata: jobsfromapi });\n\n      }).catch(error => {\n        console.log(error);\n      });\n\n  }\n  componentDidMount() {\n    this.fetchdata();\n  }\n\n  handleClick = (index) => {\n    this.props.history.push({\n      pathname:'/UpdateService',\n      state: { service: this.state.jobsdata[index] }\n    });\n\n  }\n  getKeys = function () {\n    return Object.keys(this.state.jobsdata[0]);\n  }\n\n  getHeader = function () {\n    var keys = this.getKeys();\n    return keys.map((key) => {\n      return <th key={key}>{key.toUpperCase()}</th>\n    })\n  }\n\n  getRowsData = function () {\n    var items = this.props.jobsdata;\n    var keys = this.getKeys();\n    return items.map((row, index) => {\n        return <tr key={index}><RenderRow key={index} data={row} keys={keys} /></tr>\n    })\n  }\n\n  render() {\n\n    var info = this.state.jobsdata;\n    var keys = this.getKeys();\n    var items = info.map((row, index) => {\n      return <tr key={index}><RenderRow key={index} data={row} keys={keys} />\n                <td><button onClick={() => this.handleClick(index)}>Update</button>\n        </td>\n                </tr>\n    })\n    \n    return (\n      <div>\n        <div className=\"bookingslist\">\n          <h3>My Bookings</h3>\n          <table>\n            <thead>\n              <tr>{this.getHeader()}</tr>\n            </thead>\n            <tbody>\n              {items}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const RenderRow = (props) => {\n  let url = \"./UpdateService\";\n  return props.keys.map((key) => {  \n    let keyid;  \n        if (key === \"jobid\") {\n      keyid=\"jobid\"+props.data[key];\n      return <td key={keyid}><a href={url}>{props.data[key]}</a></td>\n    } \n    else{\n      keyid=key+props.data[key];\n      return <td key={keyid}>{props.data[key]}</td>\n    }      \n  })\n}\n\n\n"]},"metadata":{},"sourceType":"module"}